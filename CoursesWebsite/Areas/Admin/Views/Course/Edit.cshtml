@model CoursesWebsite.Models.Course

@{
    ViewData["Title"] = "Edit";
}

<h1 class="text-center my-4">Edit Course</h1>

<div class="text-center mb-4">
    <img src="~/@Model.ImagePath" class="img-fluid rounded" alt="Course Image" style="max-width: 150px; height: auto;" />
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h4 class="card-title">Course Details</h4>
                    <hr />
                    <form asp-action="Edit" enctype="multipart/form-data" onsubmit="showLoadingIndicator()">
                        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
                        <div class="form-group">
                            <label asp-for="Id" class="control-label"></label>
                            <input asp-for="Id" class="form-control" disabled="disabled" aria-label="Course ID" />
                            <span asp-validation-for="Id" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Title" class="control-label"></label>
                            <input asp-for="Title" class="form-control" required placeholder="Enter Course Title" />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="Description" class="control-label"></label>
                            <textarea asp-for="Description" class="form-control" required placeholder="Enter Course Description"></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="ImageFile" class="control-label"></label>
                            <input type="file" asp-for="ImageFile" class="form-control-file" />
                            <span asp-validation-for="ImageFile" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="StudentCount" class="control-label"></label>
                            <input asp-for="StudentCount" class="form-control" type="number" min="0" required placeholder="Enter Student Count" />
                            <span asp-validation-for="StudentCount" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="CreatedDate" class="control-label"></label>
                            <input asp-for="CreatedDate" class="form-control" id="createdDate" required aria-label="Created Date" />
                            <span asp-validation-for="CreatedDate" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="UpdatedDate" class="control-label"></label>
                            <input asp-for="UpdatedDate" class="form-control" id="updatedDate" required aria-label="Updated Date" />
                            <span asp-validation-for="UpdatedDate" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="CategoryId" class="control-label"></label>
                            <select asp-for="CategoryId" class="form-control" asp-items="@ViewBag.Categories" required aria-label="Category">
                                <option value="">Select Category</option>
                            </select>
                            <span asp-validation-for="CategoryId" class="text-danger"></span>
                        </div>
                        <div class="form-group mt-4">
                            <input type="submit" value="Save" class="btn btn-primary btn-lg btn-block" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="text-center mt-4">
    <a asp-action="Index" class="btn btn-secondary btn-lg">Back to List</a>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        document.getElementById('createdDate').addEventListener('focus', function () {
            this.type = 'date'; // Change to date type for better UI
        });

        document.getElementById('updatedDate').addEventListener('focus', function () {
            this.type = 'date'; // Change to date type for better UI
        });

        function showLoadingIndicator() {
            // Show a loading spinner or overlay here
            const loadingSpinner = document.createElement('div');
            loadingSpinner.className = 'spinner-border text-primary';
            loadingSpinner.role = 'status';
            loadingSpinner.innerHTML = '<span class="sr-only">Loading...</span>';
            document.body.appendChild(loadingSpinner);
        }
    </script>
}
